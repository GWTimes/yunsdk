# 设备配网开发指南

## 概览
###### 通用配网流程

<!--
    ```sequence
    participant APP
    Note over 设备: 复位
    APP->设备: 建立连接
    APP->设备: 发送配网信息
    Note over 设备: 收到配网信息
    设备->APP: 开始连接网络
    设备->APP: 设备已上线
    APP->服务器: 账户关联设备
    服务器->APP: 关联成功
    ```
-->
![](https://picabstract-preview-ftn.weiyun.com/ftn_pic_abs_v3/b52e628469af71863b23a32916864a973c177375dc85edeb93d589b4257272e03ebaef261785a35bf325a7409ecd0a29?pictype=scale&from=30113&version=3.3.3.3&uin=824538183&fname=%E9%80%9A%E7%94%A8%E9%85%8D%E7%BD%91%E5%BA%8F%E5%88%97%E5%9B%BE.png&size=750)



## SDK 接口 （NetConfig）

### 1. 蓝牙（BLE）

#### 1.1 开启蓝牙扫描

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| startScan | 1.0.0 | 开启蓝牙扫描 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| didDiscoverHandler | Object | 否   | 蓝牙发现列表回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 1.2 关闭蓝牙扫描

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| stopScan | 1.0.0 | 关闭蓝牙扫描 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
|      |  |    |    |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 1.3 连接蓝牙设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| connect | 1.0.0 | 连接蓝牙设备 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| bluetooth     | Bluetooth |  是  |  蓝牙对象(参考个平台实现)  |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 1.4 断开蓝牙设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| disconnect | 1.0.0 | 断开蓝牙设备 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| bluetooth     | Bluetooth |  是  |  蓝牙对象(参考个平台实现)  |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 1.5 发送蓝牙消息

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| sendMessage | 1.0.0 | 发送蓝牙消息 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| wifiName     | String |  是  |  wifi名称  |
| wifiPwd     | String |  是  |  wifi密码  |
| bluetooth     | Bluetooth |  是  |  蓝牙对象(参考个平台实现)  |
| responseHandler | Object | 否   | 发送消息回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

### 2. 设备热点（AP）

#### 2.1 发送局域网消息

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| sendMessage | 1.0.0 | 发送局域网消息 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| wifiName     | String |  是  |  wifi名称  |
| wifiPwd     | String |  是  |  wifi密码  |
| host     | String |  是  |  ip地址  |
| port     | Int |  是  |  端口  |
| responseHandler | Object | 否   | 发送消息回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

### 3. 有线（LAN）

#### 3.1 扫描局域网设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| startScan | 1.0.0 | 扫描局域网设备 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| didDiscoverHandler | Object | 否   | 设备发现列表回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 3.2 停止扫描局域网设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| stopScan | 1.0.0 | 停止扫描局域网设备 |

###### 请求参数
| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
|      |  |    |    |

###### 返回参数
| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

### 4. 智能联机（Smartlink）

#### 4.1 声波/simpleConfig/空中发包

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| startSmartlink | 1.0.0 | 智能联机发包 |

###### 请求参数
| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| wifiName     | String |  是  |  wifi名称  |
| wifiPwd     | String |  是  |  wifi密码  |
| responseHandler | Object | 否   | 发送消息回调 |

###### 返回参数
| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |


### 5. 扫码（QRCode）

#### 5.1 生成二维码 (生成二维码图片)

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| createQRCode | 1.0.0 | 生成二维码 |

###### 请求参数
| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| wifiName     | String |  是  |  wifi名称  |
| wifiPwd     | String |  是  |  wifi密码  |
| userId     | String |  是  |  用户ID |
| size     | Size |  是  |  大小 |

###### 返回参数
| 类型   | 非空 | 描述                        |
| ------ | ---- | ------------------------- |
| Image | 否 |       二维码图片        |

#### 5.2 扫描二维码 (获取设备id和支持的配网方式)

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| scanQRCode | 1.0.0 | 扫描二维码 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| image     | Image |  是  |  二维码图片  |
| size     | Size |  是  |  大小 |
| responseHandler | Object | 否   | 扫描二维码回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

## 开发指南
* [iOS 设备配网SDK](ios/设备配网.md)
* [Android 设备配网SDK](Android/设备配网.md)

## 参考


## 常见问题
