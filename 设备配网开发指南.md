# 设备配网开发指南

## 概览
### 1. 通用配网流程

[```mermaid
  sequenceDiagram
  participant APP
  Note over 设备: 复位
  APP->设备: 建立连接
  APP->设备: 发送配网信息
  Note over 设备: 收到配网信息
  设备->APP: 开始连接网络
  设备->APP: 设备已上线
  APP->服务器: 账户关联设备
  服务器->APP: 关联成功
  ```]
  
![](https://picabstract-preview-ftn.weiyun.com/ftn_pic_abs_v3/b52e628469af71863b23a32916864a973c177375dc85edeb93d589b4257272e03ebaef261785a35bf325a7409ecd0a29?pictype=scale&from=30113&version=3.3.3.3&uin=824538183&fname=%E9%80%9A%E7%94%A8%E9%85%8D%E7%BD%91%E5%BA%8F%E5%88%97%E5%9B%BE.png&size=750)

### 2. 蓝牙（Bluetooth）
#### 2.1 开启蓝牙扫描
```swift
func startScan(_ didDiscoverHandler:(([Bluetooth]) -> Void)?)
```
#### 2.2 关闭蓝牙扫描
```swift
func stopScan()
```
#### 2.3 连接蓝牙设备
```swift
func connect(_ bluetooth: Bluetooth)
```
#### 2.4 断开蓝牙设备
```swift
func disconnect(_ bluetooth: Bluetooth)
```
#### 2.5 发送蓝牙消息
```swift
func sendMessage(_ wifiName: String, wifiPwd: String, to bluetooth: Bluetooth,  responseHandler:(([AnyHashable : Any]) -> Void)?)
```

### 3. AP
#### 3.1 发送局域网消息
```swift
func sendMessage(_ wifiName: String, wifiPwd: String, to host: String, port: Int, responseHandler:(([AnyHashable : Any]) -> Void)?)
```

### 4. 有线（LAN）
#### 4.1 扫描局域网设备
```swift
func startScan(_ didDiscoverHandler:(([LanDevice]) -> Void)?)
```
#### 4.2 停止扫描局域网设备
```swift
func stopScan()
```

### 5. 智能联机
#### 5.1 声波/simpleConfig/空中发包
```swift
func startSmartlink(_ wifiName: String, wifiPwd: String,  responseHandler:(([AnyHashable : Any]) -> Void)?)
```

### 6. 扫码
#### 6.1 生成二维码 (生成二维码图片)
```swift
func createQRCode(_ wifiName: String, wifiPwd: String, userId: String, size: CGSize) -> UIImage?
```
#### 6.2 扫描二维码 (获取设备id和支持的配网方式)
```swift
func scanQRCode(_ preView: UIView, cropRect: CGRect,  responseHandler:(([AnyHashable : Any]) -> Void)?)
```

## 开发指南
[iOS 用户管理SDK](ios/设备配网.md)
[Android 用户管理SDK](Android/设备配网.md)

## 参考


## 常见问题
