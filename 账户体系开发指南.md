# 账户体系开发指南

## 概览

​        基于平台提供的账号体系，开发者可以实现自有APP开发中的注册、登录、登出、删除账号、修改密码、修改用户信息等功能。

​        客户端集成平台账号SDK即可使用。账号SDK支持唤起登录页面，包括账号注册、登录、登出、忘记密码、多语言切换、修改头像、修改昵称、注销账号等功能，并支持在此页面基础上做UI风格的修改。 

## SDK 接口（AccountMgr）

### 1. 注册/注销/账号查找

#### 1.1 手机号注册

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| registerWithPhoneNumber | 1.0.0 | 手机号注册 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| countryCode | String | 是 | 国家区号 |
| phoneNumber     | String | 是   | 手机号   |
| password        | String | 是   | 登录密码 |
| verificationCode | String | 是   | 验证码   |
| responseHandler | Object | 否   | 注册回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 1.2 邮箱注册

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| registerWithEmail | 1.0.0 | 邮箱注册 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| email      | String | 是  | 邮箱   |
| password         | String | 是   | 登录密码   |
| verificationCode | String | 是   | 验证码   |
| responseHandler  | Object | 否  | 注册回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否 |               |

#### 1.3 检查账号是否已注册

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| regcheck | 1.0.0 | 检查账号是否已注册 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| phone      | String | 否   | 手机号   |
| email      | String | 否   | 邮箱   |
| responseHandler  | Object | 否  | 检查账号是否已注册回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |

#### 1.4 注销账号

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| unregister | 1.0.0 | 注销账号 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述         |
| --------------- | ------ | ---- | ------------ |
| password        | String | 是   | 登录密码     |
| responseHandler | Object | 否   | 注销账号回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void |    |               |



#### 1.5 检查手机号是否已注册（查找用户）

终端用户通过手机查找其他用户，只支持精确匹配，不支持模糊匹配。
`phoneNumber`: 手机号
`responseHandler`: 回调处理

```swift
func regcheck(phoneNumber: String, responseHandler:(([AnyHashable : Any]) -> Void)?) {}
```



#### 1.6 检查邮箱是否已注册（查找用户）

终端用户通过邮箱查找其他用户，只支持精确匹配，不支持模糊匹配。
`email`: 邮箱
`responseHandler`: 回调处理

```swift
func regcheck(email: String, responseHandler:(([AnyHashable : Any]) -> Void)?) {}
```





### 2. 登录/登出

#### 2.1 手机号登录

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| loginWithPhoneNumber | 1.0.0 | 手机号登录 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| countryCode     | String | 是   | 国家区号 |
| phoneNumber     | String | 是   | 手机号   |
| password        | String | 是   | 登录密码 |
| responseHandler | Object | 否   | 登录回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void |  否  |               |

#### 2.2 邮箱登录

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| loginWithEmail | 1.0.0 | 邮箱登录 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| email           | String | 是   | 邮箱号   |
| password        | String | 是   | 登录密码 |
| responseHandler | Object | 否   | 登录回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void |  否  |               |

#### 2.3 账号登录

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| loginWithAccountId | 1.0.0 | 账号登录 |

###### 请求参数

| 参数            | 类型   | 非空 | 描述     |
| --------------- | ------ | ---- | -------- |
| accountId       | String | 是   | 账号ID   |
| password        | String | 是   | 密码     |
| responseHandler | Object | 否   | 登录回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


#### 2.4 第三方登录

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| loginWithThirdParty | 1.0.0 | 三方登录 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| openId      | String | 是   | 三方id   |
| extraInfo         | Map | 是   | 其他信息     |
| responseHandler  | Object | 否  | 登录回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |

#### 2.5 退出登录

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| logout | 1.0.0 | 退出登录 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| responseHandler  | Object | 否  | 退出登录回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


### 3. 账户管理
#### 3.1 获取个人信息

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| getUserInfo | 1.0.0 | 获取个人信息 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| responseHandler  | Object | 否   | 个人信息回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


#### 3.2 修改个人信息

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| modifyUserInfo | 1.0.0 | 修改个人信息 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| modifiedInfo      | Map | 是   | 信息字典     |
| responseHandler  | Object | 是   | 修改个人信息回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


#### 3.3 重置密码

###### 定义描述

| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| resetPassword | 1.0.0 | 重置密码 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| newPassword         | String | 是   | 新密码     |
| verificationCode    | String | 是   | 验证码     |
| responseHandler     | Object | 是   | 重置密码回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


### 4. 分享体系

#### 4.1 分享设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| shareDevice | 1.0.0 | 分享设备 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| deviceId         | String | 是   | 设备ID    |
| accountId      | String | 是   | 访客ID   |
| responseHandler     | Object | 是   | 分享设备回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |

#### 4.2 获取访客列表

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| getVisitorList | 1.0.0 | 获取访客列表 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| deviceId         | String | 是   | 设备ID    |
| responseHandler     | Object | 是   | 获取访客列表回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |

#### 4.3 访客权限管理

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| setVisitorPermission | 1.0.0 | 设置访客权限 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| deviceId         | String | 是   | 设备ID    |
| accountId      | String | 是   | 访客账号ID   |
| permission      | Int | 是   | 权限   |
| responseHandler     | Object | 是   | 设置访客权限回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |



#### 4.4 获取分享二维码token

```swift
func getQRCodeToken(_ deviceId: String, visitor accountId: String, deviceName: String, responseHandler:(([AnyHashable : Any]) -> Void)?) {}
```



#### 4.5 接受二维码分享

```swift
func acceptQRCodeSharing(_ qrcodeToken: String, responseHandler:(([AnyHashable : Any]) -> Void)?) {}
```



#### 4.6 取消/拒绝分享

```swift
func cancelSharing(_ ivToken: String, responseHandler:(([AnyHashable : Any]) -> Void)?) {}
```


### 

### 5. 设备管理

#### 5.1 添加设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| addDevice | 1.0.0 | 添加设备 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| deviceId         | String | 是   | 设备ID    |
| responseHandler     | Object | 是   | 添加设备回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


#### 5.2 删除设备

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| deleteDevice | 1.0.0 | 删除设备 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| deviceId         | String | 是   | 设备ID    |
| responseHandler     | Object | 是   | 删除设备回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |


### 6. 获取验证码

#### 6.1 邮箱验证码

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| getVerificationCodeForEmail | 1.0.0 | 获取邮箱验证码 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| email         | String | 是   | 邮箱号    |
| responseHandler     | Object | 是   | 获取邮箱验证码回调 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |

#### 6.2 手机验证码

###### 定义描述
| 名称                    | 版本  | 描述       |
| ----------------------- | ----- | ---------- |
| getVerificationCodeForPhoneNumber | 1.0.0 | 获取手机号验证码 |

###### 请求参数

| 参数             | 类型   | 非空 | 描述     |
| ---------------- | ------ | ---- | -------- |
| countryCode | String | 是 | 国家区号 |
| phoneNumber         | String | 是   | 手机号    |
| responseHandler     | Object | 是   | 获取手机号验证码 |

###### 返回参数

| 类型   | 非空 | 描述                        |
| ------ | ---- | --------------------------- |
| Void | 否   |               |



### 7. 其他

#### 7.1 用户反馈

`messsag`: 反馈消息
`image`: 图片
`responseHandler`: 回调处理

```swift
func feedback(_ messsag: String, image: UIImage?, responseHandler:(([AnyHashable : Any]) -> Void)?) {}
```

## 

## 开发指南

* [iOS 账户体系SDK](ios/账户体系.md)
* [Android 账户体系SDK](Android/账户体系.md)

## 参考
//流程

## 常见问题
